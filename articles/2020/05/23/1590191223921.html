<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0"/><meta name="theme-color" content="#3b3e43"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="black"><meta name="format-detection" content="telephone=no"/><title>Spring - Wu's Blog</title><meta name="description" content="核心包：beans、context、core、expression 日志包：com.springsource.org.apache.commons.logging-1.1.1 老版要求的包：com.springsource.org.apache.log4j-1.2.15 配置文件 applicationContext.xml（位置和名称任意，建议用这个并放在src下） &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt; &lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&quot;&gt; &lt;!-- 配置对象 --&gt; &amp;lt...."/><meta property="og:description" content="核心包：beans、context、core、expression 日志包：com.springsource.org.apache.commons.logging-1.1.1 老版要求的包：com.springsource.org.apache.log4j-1.2.15 配置文件 applicationContext.xml（位置和名称任意，建议用这个并放在src下） &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt; &lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&quot;&gt; &lt;!-- 配置对象 --&gt; &amp;lt...."/>    <meta name="keywords" content="Solo,Java,博客,开源"/><link rel="dns-prefetch" href="https://wuruohui.github.io"/><link rel="dns-prefetch" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="https://wuruohui.github.io"><link rel="icon" type="image/png" href="https://img.hacpai.com/avatar/1583717982177_1583772537638.jpeg?imageView2/1/w/128/h/128/interlace/0/q/100"/><link rel="apple-touch-icon" href="https://img.hacpai.com/avatar/1583717982177_1583772537638.jpeg?imageView2/1/w/128/h/128/interlace/0/q/100"><link rel="shortcut icon" type="image/x-icon" href="https://img.hacpai.com/avatar/1583717982177_1583772537638.jpeg?imageView2/1/w/128/h/128/interlace/0/q/100"><meta name="copyright" content="B3log"/><meta http-equiv="Window-target" content="_top"/><meta property="og:locale" content="zh_CN"/><meta property="og:title" content="Spring - Wu's Blog"/><meta property="og:site_name" content="Wu&#39;s Blog"/><meta property="og:url"      content="https://wuruohui.github.io/articles/2020/05/23/1590191223921.html?"/><meta property="og:image" content="https://img.hacpai.com/avatar/1583717982177_1583772537638.jpeg?imageView2/1/w/128/h/128/interlace/0/q/100"/><link rel="search" type="application/opensearchdescription+xml" title="Spring - Wu's Blog" href="/opensearch.xml"><link href="https://wuruohui.github.io/rss.xml" title="RSS" type="application/rss+xml" rel="alternate"/><link rel="manifest" href="https://wuruohui.github.io/manifest.json">        <link rel="canonical" href="https://wuruohui.github.io/articles/2020/05/23/1590191223921.html">        <link rel="stylesheet"
              href="https://wuruohui.github.io/skins/Pinghsu/css/base.css?1613894294256"/>
            <link rel="prev" title="Hibernate" href="https://wuruohui.github.io/articles/2020/05/06/1588779956829.html">
            <link rel="next" title="SpringMVC" href="https://wuruohui.github.io/articles/2020/05/31/1590895519148.html">
    <script src="https://cdn.jsdelivr.net/npm/vditor@3.6.6/dist/js/icons/ant.js" async="" id="vditorIconScript"></script></head>
<body>
<header class="header">
    <div class="wrapper">
        <a href="https://wuruohui.github.io" rel="start" class="header__logo">
            <img src="https://img.hacpai.com/avatar/1583717982177_1583772537638.jpeg?imageView2/1/w/128/h/128/interlace/0/q/100" alt="Wu's Blog"/>
            Wu's Blog
        </a>

        <nav class="header__nav mobile__none">
            <a href="https://wuruohui.github.io/tags.html" rel="section">
                Tags
            </a>
            <a href="https://wuruohui.github.io/archives.html">
                Archives
            </a>
            <a rel="archive" href="https://wuruohui.github.io/links.html">
                Links
            </a>
        </nav>

        <div class="header__bar fn__none" onclick="$(this).next().slideToggle()">
            <svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20">
                <path fill="#444" d="M0 3h20v2h-20v-2zM0 9h20v2h-20v-2zM0 15h20v2h-20v-2z"></path>
            </svg>
        </div>
        <main class="header__menu fn__none">
            <ul>
                <li>
                    <a href="https://wuruohui.github.io/tags.html" rel="section">
                        Tags
                    </a>
                </li>
                <li>
                    <a href="https://wuruohui.github.io/archives.html">
                        Archives
                    </a>
                </li>
                <li>
                    <a rel="archive" href="https://wuruohui.github.io/links.html">
                        Links
                    </a>
                </li>
                <li>
                    <a rel="alternate" href="https://wuruohui.github.io/rss.xml" rel="section">
                        RSS
                    </a>
                </li>
            </ul>
        </main>
    </div>
</header>
<main id="pjax" class="fn__flex-1">
    
    <div class="post wrapper wrapper--miner">
        <h2 class="item__title">
            <a rel="bookmark" href="https://wuruohui.github.io/articles/2020/05/23/1590191223921.html">
                Spring
            </a>
        </h2>
        <div class="ft__fade item__meta">
                Published on
            <time>
                May 23, 2020
            </time>
            with <span data-uvstaturl="https://wuruohui.github.io/articles/2020/05/23/1590191223921.html">0</span> views
                and <a href="#b3logsolocomments"><span data-uvstatcmt="1590191223038">0</span> comments</a>
        </div>
        <div class="item__tags">
                <a rel="tag" class="tag tag--0" href="https://wuruohui.github.io/tags/Java">
                    <b># Java</b>
                </a>
                <a rel="tag" class="tag tag--1" href="https://wuruohui.github.io/tags/JavaEE">
                    <b># JavaEE</b>
                </a>
                <a rel="tag" class="tag tag--2" href="https://wuruohui.github.io/tags/Spring">
                    <b># Spring</b>
                </a>
                <a rel="tag" class="tag tag--3" href="https://wuruohui.github.io/tags/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0">
                    <b># 学习笔记</b>
                </a>
        </div>
        <div class="vditor-reset">
            <p>核心包：beans、context、core、expression</p>
<p>日志包：com.springsource.org.apache.commons.logging-1.1.1</p>
<p>老版要求的包：com.springsource.org.apache.log4j-1.2.15</p>
<h2 id="toc_h2_0">配置文件</h2>
<p>applicationContext.xml（位置和名称任意，建议用这个并放在src下）</p>
<pre><code class="language-xml">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd"&gt;
       &lt;!-- 配置对象 --&gt;
    &lt;bean name="admin" class="com.wu.domain.Admin"&gt;&lt;/bean&gt;
&lt;/beans&gt;
</code></pre>
<pre><code class="language-java">    @Test
    public void test1() {
        //1.创建Spring的IOC容器对象
        //ApplicationContext代表IOC容器
        //ClassPathXmlApplicationContext是ApplicationContext接口的实现类
        ApplicationContext applicationContext = new ClassPathXmlApplicationContext("applicationContext.xml");

        //2.从IOC容器中获得Bean实例
        //利用id定位到IOC容器中的Bean
        Hello hello = (Hello) applicationContext.getBean("hello");
        //利用类型返回IOC容器中的Bean，但要求IOC容器中必须只能有一个该类型的Bean
//        applicationContext.getBean(Hello.class);
        System.out.println(hello);

    }
</code></pre>
<h2 id="toc_h2_1">IOC（Inverse OF Control：控制反转）</h2>
<p>将我们创建对象的方式反转了。</p>
<p>以前对象的创建是由开发人员自己维护，包括依赖关系也是自己注入。</p>
<p>使用了spring之后，对象的创建以及依赖关系可以由spring完成创建以及注入。</p>
<p>控制反转就是反转了对象的创建方式。从自己创建反转给了程序（spring）</p>
<h2 id="toc_h2_2">DI（Dependency Injection：依赖注入）</h2>
<p>将必须的属性注入到对象中，实现IOC思想需要DI做支持</p>
<p>注入方式：</p>
<p>（1）set方法注入<br>
（2）构造方法注入<br>
（3）字段注入</p>
<p>注入类型：</p>
<p>（1）值类型注入 -&gt; 8大基本数据类型</p>
<p>（2）引用类型注入 -&gt; 将依赖对象注入</p>
<h3 id="toc_h3_3">Spring属性注入</h3>
<p>（1）set方法注入</p>
<pre><code class="language-xml">&lt;!-- 属性注入方式1：set方法注入
        为User对象中名为username的属性注入tom作为值
 --&gt;
&lt;property name="username" value="wu"&gt;&lt;/property&gt;
&lt;!-- 为admin中的引用类型属性注入下方配置的car（需要自己配置一个名为car的bean） --&gt;
&lt;property name="car" ref="car"&gt;&lt;/property&gt;

	&lt;!-- 内部Bean
		无法被外部引用
	--&gt;
	&lt;property name="hello1"&gt;
            &lt;bean class="top.wu.Hello"&gt;
                &lt;constructor-arg value="wu" index="0" type="java.lang.String"&gt;&lt;/constructor-arg&gt;
                &lt;constructor-arg value="18" index="1" type="java.lang.Integer"&gt;&lt;/constructor-arg&gt;
            &lt;/bean&gt;
        &lt;/property&gt;
</code></pre>
<p>（2）构造方法注入</p>
<pre><code class="language-xml">&lt;!-- 属性注入方法2：构造方法注入
        index属性：可以指定参数所有，如果有构造方法，参数相同，但是顺序不同，可以用这个属性指定使用哪个构造方法
        type属性：如果还有同名属性参数类型不同的构造，可以是用type指定参数类型指定要使用哪个构造方法
--&gt;
&lt;constructor-arg name="username" value="jerry" index="0" type="java.lang.String"&gt;&lt;/constructor-arg&gt;
&lt;constructor-arg name="car" ref="car"&gt;&lt;/constructor-arg&gt;
</code></pre>
<p>index和type为可选属性，当有多个构造器参数数量一致且有可能发生歧义时，用type和index区分重载的构造器</p>
<p>（3）p名称空间注入</p>
<p>导入约束： xmlns:p="<a href="http://www.springframework.org/schema/p" target="_blank">http://www.springframework.org/schema/p</a>"</p>
<pre><code class="language-xml">&lt;!-- 属性注入方式3：p标签注入
        p：加上属性="值"，如果是引用类型则用属性-ref
            p:username="hh" p:car-ref="car"
 --&gt;
&lt;bean name="admin" class="com.wu.domain.Admin" p:username="hh" p:car-ref="car"&gt;
</code></pre>
<p>（4）spel注入（spring Expression Language：spring表达式语言）</p>
<pre><code class="language-xml">&lt;!--
    #{}表示要使用spel表达式，admin.username表示去查到bean下名为admin的username属性的值
--&gt;

&lt;bean name="admin2" class="com.wu.domain.Admin"&gt;
    &lt;property name="username" value="#{admin.username}"&gt;&lt;/property&gt;
    &lt;property name="car" ref="car"&gt;&lt;/property&gt;
&lt;/bean&gt;
</code></pre>
<p>（5） 复杂类型注入</p>
<p>数组</p>
<pre><code class="language-xml">&lt;!--
    如果只有一个值可以直接使用value或者ref
    array：表示引用类型为数组类型
        值类型：value
        ref bean：表示数组中的引用类型
--&gt;
&lt;bean name="cb" class="com.wu.test.TestCB"&gt;
    &lt;property name="arr"&gt;
        &lt;array&gt;
            &lt;value&gt;hh&lt;/value&gt;
            &lt;value&gt;heihei&lt;/value&gt;
            &lt;ref bean="car"&gt;&lt;/ref&gt;
        &lt;/array&gt;
    &lt;/property&gt;
&lt;/bean&gt;
</code></pre>
<p>list/set</p>
<pre><code class="language-xml">与array一样，array换成list即可
&lt;bean name="cb" class="com.wu.test.TestCB"&gt;
    &lt;property name="arr"&gt;
        &lt;list&gt;
            &lt;value&gt;hh&lt;/value&gt;
            &lt;value&gt;heihei&lt;/value&gt;
            &lt;ref bean="car"&gt;&lt;/ref&gt;
        &lt;/list&gt;
    &lt;/property&gt;
&lt;/bean&gt;
</code></pre>
<p>map</p>
<pre><code class="language-xml">&lt;!--
    entry表示一个键值对，如果是值类型则正常用key-value引用类型则用key-ref和value-ref
--&gt;
&lt;property name="map"&gt;
    &lt;map&gt;
        &lt;entry key="name" value="hh"&gt;&lt;/entry&gt;
        &lt;entry key="object" value-ref="car"&gt;&lt;/entry&gt;
    &lt;/map&gt;
&lt;/property&gt;
</code></pre>
<p>Properties</p>
<pre><code class="language-xml">&lt;property name="prop"&gt;
    &lt;props&gt;
        &lt;prop key="hh"&gt;heihei&lt;/prop&gt;
    &lt;/props&gt;
&lt;/property&gt;
</code></pre>
<p>（6）属性配置注意点</p>
<p>字面值：可用字符串表示的值，可以通过 <value> 元素标签或 value 属性进行注入。</value></p>
<p>基本数据类型及其封装类、String 等类型都可以采取字面值注入的方式</p>
<p>若字面值中包含特殊字符，可以使用 <![CDATA[]]> 把字面值包裹起来。</p>
<h2 id="toc_h2_4">Bean配置</h2>
<h3 id="toc_h3_5">XML 配置里的 Bean 自动装配</h3>
<p>Spring IOC 容器可以自动装配 Bean. 需要做的仅仅是在 <bean> 的 autowire 属性里指定自动装配的模式</bean></p>
<ul>
<li>byType(根据类型自动装配): 若 IOC 容器中有多个与目标 Bean 类型一致的 Bean. 在这种情况下, Spring 将无法判定哪个 Bean 最合适该属性, 所以不能执行自动装配.  -- 根据bean的类型和当前bean属性的类型进行自动装配</li>
<li>byName(根据名称自动装配): 必须将目标 Bean 的名称和属性名设置的完全相同. -- 根据bean的名字和当前bean的setter风格的属性名进行自动装配，若有匹配的则进行自动装配，不匹配则不装配</li>
</ul>
<pre><code class="language-xml">    &lt;bean name="person" class="top.wu.Person" autowire="byName"&gt;
    &lt;/bean&gt;
</code></pre>
<ul>
<li>constructor(通过构造器自动装配): 当 Bean 中存在多个构造器时, 此种自动装配方式将会很复杂. 不推荐使用</li>
</ul>
<h4 id="toc_h4_6">缺点</h4>
<ul>
<li>在 Bean 配置文件里设置 autowire 属性进行自动装配将会装配 Bean 的所有属性. 然而, 若只希望装配个别属性时, autowire 属性就不够灵活了.</li>
<li>autowire 属性要么根据类型自动装配, 要么根据名称自动装配, 不能两者兼而有之.</li>
<li>一般情况下，在实际的项目中很少使用自动装配功能，因为和自动装配功能所带来的好处比起来，明确清晰的配置文档更有说服力一些</li>
</ul>
<h3 id="toc_h3_7">基于注解的Bean配置</h3>
<p>base-package 属性指定一个需要扫描的基类包，Spring 容器将会扫描这个基类包里及其子包中的所有类.<br>
当需要扫描多个包时, 可以使用逗号分隔.</p>
<pre><code class="language-xml">&lt;context:component-scan base-package="top.wu"&gt;&lt;/context:component-scan&gt;
</code></pre>
<h4 id="toc_h4_8">组件装配</h4>
<p>配置Bean与Bean之间的关系</p>
<p>@Autowired 和 @Resource 、@Inject，在方法、字段前标明注解</p>
<h3 id="toc_h3_9">Bean之间的关系</h3>
<h4 id="toc_h4_10">Bean配置的继承</h4>
<ul>
<li>Spring 允许继承 bean 的配置, 被继承的 bean 称为父 bean. 继承这个父 Bean 的 Bean 称为子 Bean</li>
<li>子 Bean 从父 Bean 中继承配置, 包括 Bean 的属性配置</li>
<li>子 Bean 也可以覆盖从父 Bean 继承过来的配置</li>
<li>父 Bean 可以作为配置模板, 也可以作为 Bean 实例. 若只想把父 Bean 作为模板, 可以设置 <bean> 的abstract 属性为 true, 这样 Spring 将不会实例化这个 Bean</bean></li>
<li>并不是 <bean> 元素里的所有属性都会被继承. 比如: autowire, abstract 等.</bean></li>
<li>也可以忽略父 Bean 的 class 属性, 让子 Bean 指定自己的类, 而共享相同的属性配置. 但此时 abstract 必须设为 true</li>
</ul>
<p>使用bean的parent属性指定继承哪个bean的配置</p>
<pre><code class="language-xml">    &lt;/bean&gt;&lt;bean name="animal1" class="top.wu.Animal" p:age="1" p:name="dog"&gt;
    &lt;/bean&gt;
    &lt;bean name="animal2" p:age="2" parent="animal1"&gt;
    &lt;/bean&gt;
</code></pre>
<h4 id="toc_h4_11">依赖Bean的配置</h4>
<ul>
<li>Spring 允许用户通过 depends-on 属性设定 Bean 前置依赖的Bean，前置依赖的 Bean 会在本 Bean 实例化之前创建好</li>
<li>如果前置依赖于多个 Bean，则可以通过逗号，空格或的方式配置 Bean 的名称</li>
</ul>
<pre><code class="language-xml">    &lt;bean name="person" class="top.wu.Person" depends-on="animal"&gt;
    &lt;/bean&gt;
</code></pre>
<h3 id="toc_h3_12">Bean的作用域</h3>
<p>在 Spring 中, 可以在 <bean> 元素的 scope 属性里设置 Bean 的作用域.<br>
默认情况下, Spring 只为每个在 IOC 容器里声明的 Bean 创建唯一一个实例, 整个 IOC 容器范围内都能共享该实例：所有后续的 getBean() 调用和 Bean 引用都将返回这个唯一的 Bean 实例.该作用域被称为 singleton, 它是所有 Bean 的默认作用域.</bean></p>
<p><img src="https://b3logfile.com/file/2020/05/image-e9a33f2d.png?imageView2/2/w/1280/format/jpg/interlace/1/q/100" alt="image.png"></p>
<pre><code class="language-xml">    &lt;bean name="animal" class="top.wu.Animal" p:age="1" p:name="animal" scope="prototype"&gt;
    &lt;/bean&gt;
</code></pre>
<h3 id="toc_h3_13">引用外部属性文件</h3>
<ul>
<li>在配置文件里配置 Bean 时, 有时需要在 Bean 的配置里混入系统部署的细节信息(例如: 文件路径, 数据源配置信息等). 而这些部署细节实际上需要和 Bean 配置相分离</li>
<li>Spring 提供了一个 PropertyPlaceholderConfigurer 的 BeanFactory 后置处理器, 这个处理器允许用户将 Bean 配置的部分内容外移到属性文件中. 可以在 Bean 配置文件里使用形式为 ${var} 的变量, PropertyPlaceholderConfigurer 从属性文件里加载属性, 并使用这些属性来替换变量.</li>
<li>Spring 还允许在属性文件中使用 ${propName}，以实现属性之间的相互引用。</li>
</ul>
<pre><code class="language-properties">#db.properties
user=root
password=458974tl
driverClass=com.mysql.jdbc.Driver
jdbcUrl=jdbc:mysql:///test?useUnicode=true&amp;amp;characterEncoding=utf8
</code></pre>
<pre><code class="language-xml">    &lt;!--  导入属性文件  --&gt;
    &lt;context:property-placeholder location="classpath:db.properties"&gt;&lt;/context:property-placeholder&gt;

    &lt;bean name="datasource" class="com.mchange.v2.c3p0.ComboPooledDataSource"&gt;
        &lt;property name="user" value="${user}"&gt;&lt;/property&gt;
        &lt;property name="password" value="${password}"&gt;&lt;/property&gt;
        &lt;property name="driverClass" value="${driverClass}"&gt;&lt;/property&gt;
        &lt;property name="jdbcUrl" value="${jdbcUrl}"&gt;&lt;/property&gt;
    &lt;/bean&gt;
</code></pre>
<h3 id="toc_h3_14">Spring表达式语言：SpEL</h3>
<p>Spring 表达式语言（简称SpEL）：是一个支持运行时查询和操作对象图的强大的表达式语言。</p>
<p>语法类似于 EL：SpEL 使用 #{…} 作为定界符，所有在大框号中的字符都将被认为是 SpEL</p>
<p>SpEL 为 bean 的属性进行动态赋值提供了便利</p>
<p>通过 SpEL 可以实现：</p>
<ul>
<li>通过 bean 的 id 对 bean 进行引用</li>
<li>调用方法以及引用对象中的属性</li>
<li>计算表达式的值</li>
<li>正则表达式的匹配</li>
</ul>
<p>（1）字面量</p>
<p>整数：<property name="count" value="#{5}" /></p>
<p>小数：<property name="frequency" value="#{89.7}" /></p>
<p>科学计数法：<property name="capacity" value="#{1e4}" /></p>
<p>String可以使用单引号或者双引号作为字符串的定界符号：<property name="“name”" value="#{'Chuck'}" /> 或 <property name="name" value="#{&quot;Chuck&quot;}" /></p>
<p>Boolean：<property name="enabled" value="#{false}" /></p>
<p>（2）引用 Bean、属性和方法</p>
<p>引用其他对象：<br>
<img src="https://b3logfile.com/file/2020/05/image-319319c3.png?imageView2/2/w/1280/format/jpg/interlace/1/q/100" alt="image.png"></p>
<p>引用其他对象的属性：<br>
<img src="https://b3logfile.com/file/2020/05/image-2f9607ac.png?imageView2/2/w/1280/format/jpg/interlace/1/q/100" alt="image.png"></p>
<p>调用其他方法，还可以链式操作：</p>
<p><img src="https://b3logfile.com/file/2020/05/image-c3bb301c.png?imageView2/2/w/1280/format/jpg/interlace/1/q/100" alt="image.png"></p>
<p><img src="https://b3logfile.com/file/2020/05/image-1dd347c6.png?imageView2/2/w/1280/format/jpg/interlace/1/q/100" alt="image.png"></p>
<p>调用静态方法或静态属性：通过 T() 调用一个类的静态方法，它将返回一个 Class Object，然后再调用相应的方法或属性：</p>
<p><img src="https://b3logfile.com/file/2020/05/image-83e408f9.png?imageView2/2/w/1280/format/jpg/interlace/1/q/100" alt="image.png"></p>
<h3 id="toc_h3_15">Bean生命周期</h3>
<p>Spring IOC 容器对 Bean 的生命周期进行管理的过程:</p>
<ul>
<li>通过构造器或工厂方法创建 Bean 实例</li>
<li>为 Bean 的属性设置值和对其他 Bean 的引用</li>
<li>调用 Bean 的初始化方法</li>
<li>Bean 可以使用了</li>
<li>当容器关闭时, 调用 Bean 的销毁方法</li>
</ul>
<p>在 Bean 的声明里设置 init-method 和 destroy-method 属性, 为 Bean 指定初始化和销毁方法.</p>
<h3 id="toc_h3_16">Bean的配置方式</h3>
<p>（1）全类名 -- 反射<br>
（2）工厂方法</p>
<pre><code class="language-xml">&lt;!-- 对象创建方式1：空参构造方式 --&gt;
    &lt;bean name="admin" class="com.wu.domain.Admin" scope="prototype" init-method="init" destroy-method="destroy"&gt;
    &lt;/bean&gt;
    &lt;!-- 对象创建方式2：静态工厂方式
            调用AdminFactory的静态getAdmin()方法创建名为admin2的对象，放到容器中
    --&gt;
    &lt;bean name="admin2" class="com.wu.test.AdminFactory" factory-method="getAdmin"&gt;&lt;/bean&gt;
    &lt;!-- 对象创建方式3：实例工厂方式
            调用AdminFactory的getAdmin2()方法创建名为admin3的对象，放到容器中
            需要配置两个bean，一个是工厂对象一个是domain对象
            domain对象中需要配置factory-bean属性指定哪一个工厂来生成对象
    --&gt;
    &lt;bean name="admin3" factory-bean="adminFactory" factory-method="getAdmin2"&gt;&lt;/bean&gt;
    &lt;bean name="adminFactory" class="com.wu.test.AdminFactory"&gt;&lt;/bean&gt;
</code></pre>
<p>（3）FactoryBean</p>
<pre><code class="language-java">//实现FactoryBean接口
public class AnimalFactoryBean implements FactoryBean&lt;Animal&gt; {


    @Override
    public Animal getObject() throws Exception {
        return new Animal();
    }

    @Override
    public Class&lt;?&gt; getObjectType() {
        return Animal.class;
    }

    @Override
    public boolean isSingleton() {
        return false;
    }
}
</code></pre>
<p>其返回的对象不是指定类的一个实例, 其返回的是该工厂 Bean 的 getObject 方法所返回的对象</p>
<pre><code class="language-xml">&lt;bean id="animal3" class="top.wu.AnimalFactoryBean"&gt;
        
    &lt;/bean&gt;
</code></pre>
<h3 id="toc_h3_17">AOP</h3>
<p>AOP(Aspect-Oriented Programming, 面向切面编程): 是一种新的方法论, 是对传统 OOP(Object-Oriented Programming, 面向对象编程) 的补充.</p>
<p>AOP 的主要编程对象是切面(aspect), 而切面模块化横切关注点.</p>
<p>在应用 AOP 编程时, 仍然需要定义公共功能, 但可以明确的定义这个功能在哪里, 以什么方式应用, 并且不必修改受影响的类. 这样一来横切关注点就被模块化到特殊的对象(切面)里.</p>
<p>AOP 的好处:</p>
<ul>
<li>每个事物逻辑位于一个位置, 代码不分散, 便于维护和升级</li>
<li>业务模块更简洁, 只包含核心业务代码.</li>
</ul>
<p><img src="https://b3logfile.com/file/2020/05/屏幕快照2020052607.41.02-c9f1ca40.png?imageView2/2/w/1280/format/jpg/interlace/1/q/100" alt="屏幕快照2020052607.41.02.png"></p>
<p>横向重复，纵向抽取</p>
<p>eg：filter解决乱码<br>
struts的拦截器</p>
<p>spring能够为容器中管理的对象生成动态代理对象，以前是需要我们使用Proxy.newProxyInstance()生成代理对象</p>
<h4 id="toc_h4_18">实现AOP的原理</h4>
<ul>
<li>
<p>动态代理技术（优先）：被代理对象必须实现接口才能产生代理对象，如果没有接口将不能使用动态代理技术</p>
</li>
<li>
<p>cglib代理（没有接口）：第三方代理技术，可以对任何类生成代理。代理的原理是对目标对象进行继承代理，如果目标对象呗final修饰，那么该类无法被cglib代理</p>
</li>
</ul>
<pre><code class="language-java">public class UserSerFactory implements MethodInterceptor {
    public UserSer getUserSerProxy() {
        Enhancer enhancer = new Enhancer();   //帮我们生成代理对象
        enhancer.setSuperclass(UserSerImpl.class);  //设置对谁进行代理
        enhancer.setCallback(this);  //代理要做什么
        UserSer UserSerProxy = (com.wu.test.ser.UserSer) enhancer.create();  //创建代理对象
        return UserSerProxy;
    }

    @Override
    public Object intercept(Object o, Method method, Object[] objects, MethodProxy methodProxy) throws Throwable {
        System.out.println("begin");
        Object invokeSuper = methodProxy.invokeSuper(o, objects);  //调用原有方法
        System.out.println("end");
        return invokeSuper;
    }
}

//test.java
public void fun1(){
    UserSerFactory userSerFactory = new UserSerFactory();
    UserSer userSerProxy = userSerFactory.getUserSerProxy();
    userSerProxy.save();
}
</code></pre>
<h4 id="toc_h4_19">AOP术语</h4>
<p>JoinPoint（连接点）：在目标对象中，所有可以增强的方法</p>
<p>Pointcut（切入点）：目标对象中已经增强的方法</p>
<p>Adivice（通知/增强）：增强的代码</p>
<p>Target（目标对象）：被代理对象</p>
<p>Weaving（织入）：将通知织入切入点，生成代理对象</p>
<p>Proxy（代理）：将通知到植入到目标对象后，形成代理对象</p>
<p>aspect（切面）：切入点+通知</p>
<h4 id="toc_h4_20">XML声明切面</h4>
<pre><code class="language-xml">    &lt;bean id="animal" class="top.wu.Animal"&gt;&lt;/bean&gt;

    &lt;bean id="animalAspectj" class="top.wu.AnimalAspectj"&gt;&lt;/bean&gt;

    &lt;!--  配置AOP  --&gt;
    &lt;aop:config&gt;
        &lt;!-- 配置切点表达式 --&gt;
        &lt;aop:pointcut id="pointcut" expression="execution(* top.wu.Animal.*(..))"/&gt;
        &lt;!-- 配置切面及通知 --&gt;
        &lt;aop:aspect ref="animalAspectj"&gt;
            &lt;aop:before method="BeforeAspectj" pointcut-ref="pointcut"&gt;&lt;/aop:before&gt;
        &lt;/aop:aspect&gt;
    &lt;/aop:config&gt;
</code></pre>
<h4 id="toc_h4_21">注解声明切面</h4>
<p>前置通知：目标方法运行之前调用</p>
<p>后置通知（出现异常不调用）：目标方法运行之后调用</p>
<p>环绕通知：目标方法运行之前之后都调用</p>
<p>异常拦截通知：如果出现异常就调用</p>
<p>后置通知（无论是否出现异常都调用）：目标方法运行之后调用</p>
<pre><code class="language-xml">    &lt;!-- 启用aspectj注解支持 --&gt;
    &lt;aop:aspectj-autoproxy&gt;&lt;/aop:aspectj-autoproxy&gt;
</code></pre>
<pre><code class="language-java">@Aspect
@Component
public class AnimalAspectj {

    //前置通知
    @Before("execution( public void top.wu.Animal.noise())")
    public void BeforeAspectj(JoinPoint joinPoint) {
        String methodName = joinPoint.getSignature().getName();
        List&lt;Object&gt; args = Arrays.asList(joinPoint.getArgs());
        System.out.println(methodName +" begin，args："+ args);
    }

    //后置通知
    @After("execution( * top.wu.Animal.*())")
    public void AfterAspectj(JoinPoint joinPoint) {
        String methodName = joinPoint.getSignature().getName();
        List&lt;Object&gt; args = Arrays.asList(joinPoint.getArgs());
        System.out.println(methodName + " end，args：" + args);
    }

    //返回通知
    @AfterReturning(value = "execution(* top.wu.Animal.*(..))", returning = "result")
    public void AfterReturning(Object result) {
        System.out.println("result：" + result);
    }


//异常通知
    //目标方法出现异常时的通知，可以访问到异常对象，且可以指定在出现特定异常时再执行通知代码
    @AfterThrowing(value = "execution(* top.wu.Animal.*(..))",throwing = "tx")
    public void AfterThrowing(Exception tx) {
        System.out.println(tx);
    }

    //环绕通知需要携带ProceedingJoinPoint类型的参数
    //环绕通知类似于动态代理全过程：ProceedingJoinPoint类型的参数可以决定目标方法是否执行
    //且环绕通知必须有返回值，返回值即为目标方法的返回值
    @Around("execution(* top.wu.Animal.*(..))")
    public Object around(ProceedingJoinPoint pjd) {
        Object result = null;
        try {
            result = pjd.proceed();
        } catch (Throwable throwable) {
            throwable.printStackTrace();
        }
        return result;
    }

}
</code></pre>
<pre><code class="language-java">    @Test
    public void testAnno() {
        ApplicationContext applicationContext = new ClassPathXmlApplicationContext("applicationContext.xml");
        Animal animal = (Animal) applicationContext.getBean("animal");
        animal.noise();
    }
</code></pre>
<h2 id="toc_h2_22">Spring对JDBC的支持</h2>
<h3 id="toc_h3_23">JdbcTemplate</h3>
<pre><code class="language-xml">&lt;!--  导入属性文件  --&gt;
    &lt;context:property-placeholder location="classpath:db.properties"&gt;&lt;/context:property-placeholder&gt;

    &lt;bean name="datasource" class="com.mchange.v2.c3p0.ComboPooledDataSource"&gt;
        &lt;property name="user" value="root"&gt;&lt;/property&gt;
        &lt;property name="password" value="${password}"&gt;&lt;/property&gt;
        &lt;property name="driverClass" value="${driverClass}"&gt;&lt;/property&gt;
        &lt;property name="jdbcUrl" value="${jdbcUrl}"&gt;&lt;/property&gt;
    &lt;/bean&gt;

    &lt;!-- 配置jdbc模板 --&gt;
    &lt;bean id="jdbcTemplate" class="org.springframework.jdbc.core.JdbcTemplate"&gt;
        &lt;property name="dataSource" ref="datasource"&gt;&lt;/property&gt;
    &lt;/bean&gt;
</code></pre>
<pre><code class="language-java">	ApplicationContext applicationContext = new ClassPathXmlApplicationContext("spring-datasource.xml");
        JdbcTemplate jdbcTemplate = (JdbcTemplate) applicationContext.getBean("jdbcTemplate");
        String querySql = "select * from NEWS where id = ?";
        //queryForObject(String var1, RowMapper&lt;T&gt; var2, @Nullable Object... var3)
	//RowMapper指定如何去映射结果集的行，常用实现类为BeanPropertyRowMapper
	//不支持级联属性
        RowMapper&lt;News&gt; rowMapper = new BeanPropertyRowMapper&lt;&gt;(News.class);
        News news = jdbcTemplate.queryForObject(querySql, rowMapper, 1);
	
	//查询实体类的集合
	String queryList = "select * from NEWS where id &gt; ?";
        List&lt;News&gt; newsList = jdbcTemplate.query(queryList, rowMapper, 0);
</code></pre>
<h3 id="toc_h3_24">NamedParameterJdbcTemplate -- 具名参数</h3>
<pre><code>    &lt;!-- 只有非空的构造器 --&gt;
    &lt;bean id="namedParameterJdbcTemplate" class="org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate"&gt;
        &lt;constructor-arg ref="datasource"&gt;&lt;/constructor-arg&gt;
    &lt;/bean&gt;
</code></pre>
<pre><code class="language-java">        ApplicationContext applicationContext = new ClassPathXmlApplicationContext("spring-datasource.xml");
        NamedParameterJdbcTemplate namedParameterJdbcTemplate = (NamedParameterJdbcTemplate) applicationContext.getBean("namedParameterJdbcTemplate");
        String sql = "insert into news(title,author) values(:title,:author)";
        Map map = new HashMap();
        map.put("title","hui");
        map.put("author","hui");
        namedParameterJdbcTemplate.update(sql,map);
</code></pre>
<pre><code class="language-java">	News news = new News();
        news.setAuthor("heihei");
        news.setTitle("ao");
        SqlParameterSource sqlParameterSource = new BeanPropertySqlParameterSource(news);
        namedParameterJdbcTemplate.update(sql,sqlParameterSource);
</code></pre>
<h2 id="toc_h2_25">事务管理</h2>
<h3 id="toc_h3_26">声明式事务</h3>
<pre><code>    &lt;!-- 配置事务管理器 --&gt;
    &lt;bean id="transactionManager" class="org.springframework.jdbc.datasource.DataSourceTransactionManager"&gt;
        &lt;property name="dataSource" ref="datasource"&gt;&lt;/property&gt;
    &lt;/bean&gt;

    &lt;!-- 启用注解事务 --&gt;
    &lt;tx:annotation-driven transaction-manager="transactionManager"&gt;&lt;/tx:annotation-driven&gt;
</code></pre>
<p>在方法上声明@Transactional注解即可开启事务</p>
<h3 id="toc_h3_27">事务的传播行为</h3>
<ul>
<li>当事务方法被另一个事务方法调用时, 必须指定事务应该如何传播. 例如: 方法可能继续在现有事务中运行, 也可能开启一个新事务, 并在自己的事务中运行.</li>
<li>事务的传播行为可以由传播属性指定. Spring 定义了 7  种类传播行为.</li>
</ul>
<pre><code>    //通过propagation属性指定传播行为
    @Transactional(propagation = Propagation.REQUIRED)
</code></pre>
<p><img src="https://b3logfile.com/file/2020/05/image-4d214315.png?imageView2/2/w/1280/format/jpg/interlace/1/q/100" alt="image.png"></p>
<h3 id="toc_h3_28">并发事务导致的问题</h3>
<ul>
<li>脏读: 对于两个事物 T1, T2, T1  读取了已经被 T2 更新但 还没有被提交的字段. 之后, 若 T2 回滚, T1读取的内容就是临时且无效的.</li>
<li>不可重复读:对于两个事物 T1, T2, T1  读取了一个字段, 然后 T2 更新了该字段. 之后, T1再次读取同一个字段, 值就不同了.</li>
<li>幻读:对于两个事物 T1, T2, T1  从一个表中读取了一个字段, 然后 T2 在该表中插入了一些新的行. 之后, 如果 T1 再次读取同一个表, 就会多出几行.</li>
</ul>
<p>@Transactional 的 isolation 属性中设置隔离级别</p>
<h4 id="toc_h4_29">事务的隔离级别</h4>
<p><img src="https://b3logfile.com/file/2020/05/image-6a91bf42.png?imageView2/2/w/1280/format/jpg/interlace/1/q/100" alt="image.png"></p>
<h3 id="toc_h3_30">回滚</h3>
<p>默认情况下，Spring的声明式事务对所有运行时异常进行回滚，也可以通过对应的属性进行设置</p>
<p>可以通过 @Transactional 注解的 rollbackFor 和 noRollbackFor 属性来定义. 这两个属性被声明为 Class[] 类型的, 因此可以为这两个属性指定多个异常类.</p>
<ul>
<li>rollbackFor:  遇到时必须进行回滚</li>
<li>noRollbackFor: 一组异常类，遇到时必须不回滚</li>
</ul>
<h3 id="toc_h3_31">只读、超时属性</h3>
<p>readOnly：使用@Transactional 注解的readOnly属性指定事务是否只读<br>
timeout：事务在强制回滚之前可以保持多久. 这样可以防止长期运行的事务占用资源</p>
<h3 id="toc_h3_32">XML配置事务</h3>
<pre><code class="language-xml">&lt;!-- 配置事务管理器 --&gt;
    &lt;bean id="transactionManager" class="org.springframework.jdbc.datasource.DataSourceTransactionManager"&gt;
        &lt;property name="dataSource" ref="datasource"&gt;&lt;/property&gt;
    &lt;/bean&gt;

    &lt;!-- 配置事务属性 --&gt;
    &lt;tx:advice id="txAdvice"&gt;
        &lt;tx:attributes&gt;
            &lt;!-- 根据方法名，指定事务的属性 --&gt;
            &lt;tx:method name="*" propagation="REQUIRED"/&gt;
        &lt;/tx:attributes&gt;
    &lt;/tx:advice&gt;

    &lt;!-- 配置事务切入点，以及将事务切入点和事务属性关联起来 --&gt;
    &lt;aop:config&gt;
        &lt;aop:pointcut id="txPointCut" expression="execution(* top.wu.Animal.*(..))"/&gt;
        &lt;aop:advisor advice-ref="txAdvice" pointcut-ref="txPointCut"&gt;&lt;/aop:advisor&gt;
    &lt;/aop:config&gt;
</code></pre>
                <div>
                    <hr>

标题：Spring<br>
作者：<a href="https://wuruohui.github.io" target="_blank">WuRuoHui</a><br>
地址：<a href="https://wuruohui.github.io/articles/2020/05/23/1590191223921.html" target="_blank">https://wuruohui.github.io/articles/2020/05/23/1590191223921.html</a><br>

<!-- 签名档内可使用 HTML、JavaScript -->
<br>
                </div>
        </div>
    </div>
    <div class="post__toc">
<ul class="article__toc">
        <li class="toc__h2">
            <a href="#toc_h2_0">配置文件</a>
        </li>
        <li class="toc__h2">
            <a href="#toc_h2_1">IOC（Inverse OF Control：控制反转）</a>
        </li>
        <li class="toc__h2">
            <a href="#toc_h2_2">DI（Dependency Injection：依赖注入）</a>
        </li>
        <li class="toc__h3">
            <a href="#toc_h3_3">Spring属性注入</a>
        </li>
        <li class="toc__h2">
            <a href="#toc_h2_4">Bean配置</a>
        </li>
        <li class="toc__h3">
            <a href="#toc_h3_5">XML 配置里的 Bean 自动装配</a>
        </li>
        <li class="toc__h4">
            <a href="#toc_h4_6">缺点</a>
        </li>
        <li class="toc__h3">
            <a href="#toc_h3_7">基于注解的Bean配置</a>
        </li>
        <li class="toc__h4">
            <a href="#toc_h4_8">组件装配</a>
        </li>
        <li class="toc__h3">
            <a href="#toc_h3_9">Bean之间的关系</a>
        </li>
        <li class="toc__h4">
            <a href="#toc_h4_10">Bean配置的继承</a>
        </li>
        <li class="toc__h4">
            <a href="#toc_h4_11">依赖Bean的配置</a>
        </li>
        <li class="toc__h3">
            <a href="#toc_h3_12">Bean的作用域</a>
        </li>
        <li class="toc__h3">
            <a href="#toc_h3_13">引用外部属性文件</a>
        </li>
        <li class="toc__h3">
            <a href="#toc_h3_14">Spring表达式语言：SpEL</a>
        </li>
        <li class="toc__h3">
            <a href="#toc_h3_15">Bean生命周期</a>
        </li>
        <li class="toc__h3">
            <a href="#toc_h3_16">Bean的配置方式</a>
        </li>
        <li class="toc__h3">
            <a href="#toc_h3_17">AOP</a>
        </li>
        <li class="toc__h4">
            <a href="#toc_h4_18">实现AOP的原理</a>
        </li>
        <li class="toc__h4">
            <a href="#toc_h4_19">AOP术语</a>
        </li>
        <li class="toc__h4">
            <a href="#toc_h4_20">XML声明切面</a>
        </li>
        <li class="toc__h4">
            <a href="#toc_h4_21">注解声明切面</a>
        </li>
        <li class="toc__h2">
            <a href="#toc_h2_22">Spring对JDBC的支持</a>
        </li>
        <li class="toc__h3">
            <a href="#toc_h3_23">JdbcTemplate</a>
        </li>
        <li class="toc__h3">
            <a href="#toc_h3_24">NamedParameterJdbcTemplate -- 具名参数</a>
        </li>
        <li class="toc__h2">
            <a href="#toc_h2_25">事务管理</a>
        </li>
        <li class="toc__h3">
            <a href="#toc_h3_26">声明式事务</a>
        </li>
        <li class="toc__h3">
            <a href="#toc_h3_27">事务的传播行为</a>
        </li>
        <li class="toc__h3">
            <a href="#toc_h3_28">并发事务导致的问题</a>
        </li>
        <li class="toc__h4">
            <a href="#toc_h4_29">事务的隔离级别</a>
        </li>
        <li class="toc__h3">
            <a href="#toc_h3_30">回滚</a>
        </li>
        <li class="toc__h3">
            <a href="#toc_h3_31">只读、超时属性</a>
        </li>
        <li class="toc__h3">
            <a href="#toc_h3_32">XML配置事务</a>
        </li>
</ul>    </div>
    <div class="body--gray post__gray">
        <div class="wrapper comment">
                <div id="gitalk-container" style="padding: 30px 0;"></div>
                <div id="b3logsolocomments"></div>
                <div id="vcomment" style="padding: 30px 0;" data-name="WuRuoHui" data-postId="1590191223038"></div>

            <div class="post__list fn__flex">
                <div class="fn__flex-1">
                    <div id="externalRelevantArticles"></div>
                </div>
                <div class="post__list-mid fn__flex-1">
                    <div id="randomArticles"></div>
                </div>
                <div class="fn__flex-1">
                    <div id="relevantArticles"></div>
                </div>
            </div>
        </div>
    </div>

    <div class="post__fix">
        <div class="wrapper">
            <span class="post__share mobile__none">
                Share
                <span class="tag tag--4" data-type="weibo">WeiBo</span>
                <span class="tag tag--5" data-type="twitter">Twitter</span>
                <span class="tag tag--6" data-type="qqz">QZone</span>
                <span class="post__code tag tag--7"
                      data-type="wechat"
                      data-title="Spring"
                      data-blogtitle="Wu's Blog"
                      data-url="https://wuruohui.github.io/articles/2020/05/23/1590191223921.html"
                      data-avatar="https://img.hacpai.com/avatar/1583717982177_1583772537638.jpeg?imageView2/1/w/128/h/128/interlace/0/q/100">
                    WeChat
                    <span class="qrcode"></span>
                </span>
            </span>
            <span class="post__arrow">
                    <a href="https://wuruohui.github.io/articles/2020/05/06/1588779956829.html" rel="prev"
                       class="vditor-tooltipped__n vditor-tooltipped"
                       pjax-title="Hibernate"
                       aria-label="旧一篇: Hibernate">←</a>

                    <a href="https://wuruohui.github.io/articles/2020/05/31/1590895519148.html" rel="next"
                       class="vditor-tooltipped__n vditor-tooltipped"
                       pjax-title="SpringMVC"
                       aria-label="新一篇: SpringMVC">→</a>
                <a href="javascript:Util.goTop()" class="vditor-tooltipped__n vditor-tooltipped"
                   aria-label="移动到顶部">↑</a>
                <a href="javascript:Util.goBottom()" class="vditor-tooltipped__n vditor-tooltipped"
                   aria-label="移动到底部">↓</a>
            </span>
        </div>
    </div>
    
</main>
<footer class="footer">
    <div class="ft__center">
    </div>
    <nav class="footer__nav mobile__none">
        <a class="ft__link" rel="alternate" href="https://wuruohui.github.io/rss.xml" rel="section">RSS</a>
    </nav>
    <div class="footer__border mobile__none"></div>
    <div class="wrapper fn__flex">
        <div class="fn__flex-1 mobile__none">
            <div class="ft__fade">WuRuoHui - 学习笔记</div>
            <br>
                格物致知！
        </div>


        <div class="fn__flex-1 footer__copyright">
            <a class="ft__link" href="https://wuruohui.github.io/archives.html">
                55
                文章
            </a>
           <br>
            <span data-uvstaturl="https://wuruohui.github.io">0</span> <span class="ft-gray">浏览</span>
 <br>
            &copy; 2021
            <a class="ft__link" href="https://wuruohui.github.io">Wu's Blog</a>
            <br>
<a href="http://www.beian.miit.gov.cn" target="_blank">粤ICP备20019661号</a>
        </div>
    </div>
</footer>
<script>
  var Label = {
    speech: true,
    servePath: "https://wuruohui.github.io",
    staticServePath: "https://wuruohui.github.io",
    luteAvailable: false,
    hljsStyle: 'github',
    langLabel: "zh_CN",
    version: "4.3.1",
    staticSite: true,
    showCodeBlockLn: false,
    articleId: "1590191223038",
  }
</script>
<script type="text/javascript" src="https://wuruohui.github.io/skins/Pinghsu/js/headroom.min.js"></script>
<script type="text/javascript"
        src="https://wuruohui.github.io/skins/Pinghsu/js/common.min.js?1613894294256"
        charset="utf-8"></script>
<link type="text/css" rel="stylesheet" href="https://cdn.jsdelivr.net/npm/kanbanniang@0.2.10/index.css"/>
<script async src="https://cdn.jsdelivr.net/npm/kanbanniang@0.2.10/index.js"></script>
<div class="solo-kanbanniang">
    <div class="solo-kanbanniang__tip"></div>
    <canvas id="soloKanbanniang" width="280" height="250"></canvas>
    <div class="solo-kanbanniang__tool">
        <svg id="soloKanbanniangHome" viewBox="0 0 32 32" width="100%" height="100%">
            <path d="M32 18.967l-16-12.42-16 12.42v-5.064l16-12.42 16 12.42zM28 18.516v12h-8v-8h-8v8h-8v-12l12-9z"></path>
        </svg>
        <svg id="soloKanbanniangRSS" viewBox="0 0 1024 1024" width="32" height="32">
            <path d="M320.364 768q0 45.728-32 77.728t-77.728 32-77.728-32-32-77.728 32-77.728 77.728-32 77.728 32 32 77.728zM612.94 838.272q1.152 16-9.728 27.424-10.272 12-26.848 12h-77.152q-14.272 0-24.576-9.44t-11.424-23.712q-12.576-130.848-105.44-223.712t-223.712-105.44q-14.272-1.152-23.712-11.424t-9.44-24.576V402.24q0-16.576 12-26.848 9.728-9.728 24.576-9.728h2.848q91.424 7.424 174.848 46.016t148 103.712q65.152 64.576 103.712 148t46.016 174.848z m292.576 1.152q1.152 15.424-10.272 26.848-10.272 11.424-26.272 11.424h-81.728q-14.848 0-25.44-10.016t-11.136-24.288q-6.848-122.848-57.728-233.44t-132.288-192-192-132.288-233.44-58.272q-14.272-0.576-24.288-11.136t-10.016-24.864V109.664q0-16 11.424-26.272 10.272-10.272 25.152-10.272h1.728q149.728 7.424 286.56 68.576t243.136 168q106.848 106.272 168 243.136t68.576 286.56z"></path>
        </svg>
        <svg id="soloKanbanniangChat" viewBox="0 0 1024 1024" width="32" height="32">
            <path d="M802.42709 96.163153H219.476155c-84.48109 0-154.896836 71.746044-154.896836 157.840888v393.119449c0 86.072331 70.415746 157.819398 154.896836 157.819399h214.038818V925.470963s22.526039 40.168862 64.767096 5.734608c30.965246-25.819039 126.721123-91.828428 171.775248-123.385145h132.369773c84.502579 0 154.896836-83.21526 154.896836-157.839865V251.125481c0-86.094844-70.394257-154.962328-154.896836-154.962328zM301.144176 518.002714c-39.427988 0-70.416769-31.576159-70.416769-71.746044 0-40.168862 30.988782-71.746044 70.416769-71.746044 39.426965 0 70.393233 31.577183 70.393234 71.746044 0 40.169885-30.966269 71.746044-70.393234 71.746044z m208.411657 0c-39.450501 0-70.415746-31.576159-70.415746-71.746044 0-40.168862 30.965246-71.746044 70.415746-71.746044 39.405475 0 70.394257 31.577183 70.394257 71.746044 0 40.169885-30.988782 71.746044-70.394257 71.746044z m211.203236 0c-39.426965 0-70.416769-31.576159-70.416769-71.746044 0-40.168862 30.988782-71.746044 70.416769-71.746044s70.415746 31.577183 70.415746 71.746044c-0.001023 40.169885-30.988782 71.746044-70.415746 71.746044z"></path>
        </svg>
        <svg id="soloKanbanniangChange" viewBox="0 0 1024 1024" width="32" height="32">
            <path d="M936.672 193.216l-226.88-64c-8.704-2.528-18.112-1.12-25.824 3.776-7.68 4.864-12.896 12.736-14.432 21.728C655.712 236.928 595.328 288 512 288c-71.424 0-142.464-103.296-163.776-143.104-7.136-13.28-22.528-19.84-37.024-15.68l-224 64C73.472 197.152 64 209.728 64 224v256a31.93 31.93 0 0 0 11.712 24.736c7.392 6.08 17.152 8.512 26.56 6.624L224 487.04V832c0 52.928 43.072 96 96 96h384c52.928 0 96-43.072 96-96V519.04l121.728 24.352c9.44 1.92 19.2-0.544 26.56-6.624C955.68 530.656 960 521.6 960 512V224c0-14.336-9.536-26.912-23.328-30.784zM672 800H352c-17.664 0-32-14.304-32-32s14.336-32 32-32h320c17.696 0 32 14.304 32 32s-14.304 32-32 32z"></path>
        </svg>
        <svg id="soloKanbanniangPhoto" viewBox="0 0 1024 1024" width="32" height="32">
            <path d="M898.048 258.048q23.552-1.024 46.592 9.216t40.96 27.136 28.672 39.424 10.752 46.08l0 390.144q0 24.576-10.752 47.104t-28.672 40.448-40.96 28.16-47.616 10.24l-697.344 0q-24.576 0-48.64-10.24t-42.496-27.648-29.696-40.448-11.264-48.64l0-381.952q0-22.528 10.752-45.568t28.672-41.472 39.936-30.208 44.544-11.776l63.488 0 13.312-83.968q3.072-20.48 18.432-32.768t34.816-12.288l456.704 0q19.456 0 34.304 10.752t16.896 34.304l14.336 83.968 54.272 0zM548.864 712.704q40.96 0 77.824-15.872t63.488-42.496 42.496-62.976 15.872-77.312-15.872-77.312-42.496-62.976-63.488-42.496-77.824-15.872-77.312 15.872-63.488 42.496-43.008 62.976-15.872 77.312 15.872 77.312 43.008 62.976 63.488 42.496 77.312 15.872z"></path>
        </svg>
        <svg id="soloKanbanniangGithub" viewBox="0 0 1024 1024" width="32" height="32">
            <path d="M1024 524.8c0 114.346667-32.554667 217.216-97.706667 308.565333-65.066667 91.306667-149.162667 154.538667-252.288 189.610667-11.989333 2.304-20.778667 0.682667-26.325333-4.778667a27.605333 27.605333 0 0 1-8.362667-20.48v-144.213333c0-44.16-11.52-76.501333-34.645333-97.024 25.344-2.730667 48.085333-6.826667 68.309333-12.288a268.629333 268.629333 0 0 0 62.72-26.666667 187.434667 187.434667 0 0 0 53.973334-45.44c14.421333-18.005333 26.197333-41.898667 35.328-71.765333 9.088-29.824 13.653333-64.128 13.653333-102.826667 0-55.125333-17.536-102.058667-52.650667-140.8 16.426667-41.429333 14.677333-87.893333-5.333333-139.392-12.458667-4.096-30.464-1.578667-54.016 7.509334a355.328 355.328 0 0 0-61.312 30.08L640 271.274667a462.336 462.336 0 0 0-128-17.749334c-43.989333 0-86.656 5.930667-128 17.749334a589.824 589.824 0 0 0-28.330667-18.432c-11.776-7.253333-30.336-16.042667-55.68-26.325334-25.344-10.24-44.416-13.312-57.301333-9.216-19.584 51.498667-21.12 97.962667-4.693333 139.434667-35.114667 38.698667-52.650667 85.632-52.650667 140.757333 0 38.698667 4.565333 72.874667 13.653333 102.485334 9.130667 29.610667 20.778667 53.546667 34.986667 71.765333 14.250667 18.218667 32.128 33.493333 53.674667 45.781333 21.546667 12.288 42.453333 21.205333 62.677333 26.666667 20.224 5.461333 43.008 9.557333 68.309333 12.288-17.749333 16.384-28.629333 39.850667-32.64 70.4a130.005333 130.005333 0 0 1-29.994666 10.24c-10.666667 2.261333-23.338667 3.413333-37.973334 3.413333-14.72 0-29.269333-4.906667-43.690666-14.677333-14.464-9.813333-26.794667-24.064-36.992-42.709333a109.226667 109.226667 0 0 0-32.341334-35.541334c-13.141333-9.130667-24.106667-14.592-33.024-16.426666l-13.312-2.048c-9.344 0-15.786667 1.024-19.328 3.072-3.584 2.090667-4.693333 4.693333-3.328 7.893333 1.28 3.157333 3.328 6.4 5.973334 9.557333 2.688 3.2 5.546667 5.930667 8.661333 8.192l4.693333 3.413334c9.770667 4.565333 19.413333 13.226667 29.013334 25.984 9.514667 12.757333 16.512 24.362667 20.992 34.858666l6.656 15.701334c5.76 17.322667 15.530667 31.317333 29.312 42.026666 13.781333 10.666667 28.672 17.536 44.672 20.48 16 2.986667 31.445333 4.565333 46.336 4.821334 14.890667 0.213333 27.221333-0.597333 36.992-2.389334l15.36-2.730666c0 17.28 0.085333 37.546667 0.298666 60.8l0.341334 36.906666a27.050667 27.050667 0 0 1-8.661334 20.48c-5.76 5.461333-14.677333 7.082667-26.666666 4.778667-103.125333-35.072-187.221333-98.261333-252.330667-189.610667C32.554667 742.058667 0 639.146667 0 524.8c0-95.232 22.869333-183.04 68.693333-263.466667A516.266667 516.266667 0 0 1 254.976 70.4C333.44 23.466667 419.114667 0 512 0c92.885333 0 178.56 23.466667 256.981333 70.4a516.266667 516.266667 0 0 1 186.368 190.976C1001.130667 341.802667 1024 429.653333 1024 524.842667z"></path>
        </svg>
        <svg id="soloKanbanniangClose" viewBox="0 0 1024 1024" width="32" height="32">
            <path d="M517.572566143763 1018.6748601482986C238.26554897656422 1018.6748601482986 11.897910175114305 792.2714997690043 11.897910175114305 513.0002041796496c0-279.3070171671984 226.36763880144977-505.71037754649296 505.6746559686481-505.71037754649296 279.2712955893538 0 505.6746559686481 226.40336037929444 505.6746559686481 505.71037754649296C1023.2472221124112 792.2714997690043 796.8795833109612 1018.6748601482986 517.572566143763 1018.6748601482986zM754.7281214542927 339.25044954334646c13.752807470184345-13.752807470184345 9.680547595895998-40.186775075214015-9.073280772537204-58.94060344364717l-2.143294670678079-2.1075730928334457c-18.7538283684332-18.7538283684332-45.15207439561819-22.861809820566194-58.90488186580257-9.073280772537204l-168.21291007038468 168.24863164822932-180.42968969324974-180.46541127109438c-13.967136937252159-13.967136937252159-40.72259874288353-9.823433907274534-59.72647815622916 9.216167083915742l-2.143294670678079 2.143294670678079c-19.039600991190277 19.003879413345654-23.111860865478626 45.75934121897699-9.180445506071107 59.655035000539876l180.42968969324974 180.46541127109438-176.07165719620428 176.03593561835962c-13.788529048028984 13.824250625873615-9.716269173740633 40.151053497369375 9.073280772537204 58.94060344364717l2.1075730928334457 2.1075730928334457c18.7538283684332 18.7538283684332 45.15207439561819 22.897531398410823 58.90488186580257 9.073280772537204l176.10737877404887-176.10737877404887 170.39192631890742 170.42764789675192c13.967136937252159 13.931415359407513 40.686877165038865 9.85915548511917 59.690756578384516-9.180445506071107l2.1790162485227142-2.1790162485227142c19.039600991190277-18.968157835501014 23.147582443323273-45.72361964113239 9.180445506071107-59.690756578384516l-170.39192631890742-170.42764789675192L754.7281214542927 339.25044954334646z"></path>
        </svg>
    </div>
</div>



<script type="text/javascript">
    Util.addScript('https://wuruohui.github.io/js/page.min.js?1613894294256', 'soloPageScript')
    var page = new Page({
        "commentContentCannotEmptyLabel": "评论不能为空",
        "oId": "1590191223038",
        "blogHost": "https://wuruohui.github.io",
        "randomArticles1Label": "随机阅读：",
        "externalRelevantArticles1Label": "站外相关阅读："
    });
    $(document).ready(function () {
        page.load();
    page.tips.externalRelevantArticlesDisplayCount = "0";
    page.loadRandomArticles('<h3>RECOMMEND POSTS</h3>');
    page.loadRelevantArticles('1590191223038', '<h3>RELEVANT POSTS</h3>');
Skin.initArticle()
    });
</script>

</body>
</html>

<!-- Generated by Latke (https://github.com/88250/latke) in 18ms, 2021/02/21 16:33:53 -->